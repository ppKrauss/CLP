<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">
        <title>CLP</title>
        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href=".">CLP</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href=".">Apresentação</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Especificações <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="spec01-hub/">Geral</a>
</li>
                            
<li >
    <a href="spec02-coord/">CLP-coord</a>
</li>
                            
<li >
    <a href="spec03-via/">CLP-via</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apêndices <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="spec04ap01-siglas/">Siglas</a>
</li>
                            
<li >
    <a href="comparacao/">Comparações</a>
</li>
                            
<li >
    <a href="spec04ap05-ingenuos/">Algoritmos ingênuos</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="assets/README/">Créditos</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="spec01-hub/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#dois-padroes-via-e-coordenada">Dois padrões, via e coordenada</a></li>
        <li class="main "><a href="#planejamento">Planejamento</a></li>
            <li><a href="#objetivo-e-metas-do-trabalho">Objetivo e metas do trabalho</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><strong><center><big>CLP</big><br/>v0.0.1 - rascunho</center></strong></p>
<p>Proposta de <strong>C</strong>ódigo <strong>L</strong>ocalizador de <strong>P</strong>ortão, CLP: recomendações, estudos de viabilidade e lançamento de consulta pública para a proposta de um padrão.</p>
<p>A ideia central do CLP é <strong>oferecer de maneira simples e padronizada, através de um código, a localização geográfica de um portão</strong>. O código seria usado também como  <strong>"endereço do <em>local</em>"</strong> ao qual o portão dá acesso.</p>
<p>Porteira, portão, porta ou portal: no meio urbano a menor distância entre portões é da ordem de 3 metros, no meio rural é da ordem de 15 metros. Portões de condomínios, parques, etc. no meio urbano, requerem menos precisão, como no meio rural.</p>
<p><img alt="" src="./assets/ilustra-escalas01.jpg" /></p>
<p>As tecnologias para se implantar e padronizar um CLP  são bem consolidadas, existem opções como o <a href="http://geohash.org/6gyf4bf1n">Geohash</a>, <a href="https://s2geometry.io/">S2</a> ou <a href="https://plus.codes/588MC9X8+RC">PlusCode</a>, que são padrões livres, e <a href="http://www.mapcode.com/getcoords.html?iso3=331&amp;mapcode=RR.56&amp;xx=-46.633956&amp;yy=-23.550385">MapCode</a> ou Whats3words, patenteados mas úteis como exemplo. Estas opções podem ser melhor adaptadas às condições e padrões locais do Brasil, e nisto consistirá uma parte relevante dos estudos e recomendações realizados pelo presente projeto.</p>
<p><a href="https://github.com/OSMBrasil/CRP/blob/master/substituir-CEP.md">Queremos substituir o CEP</a> por um código que vá além: assim como o CEP, seu prefixo identifica partes maiores, estado, cidade, bairro, rua... E não deveria parar por aí, já existe tecnologia para, com um simples código, chegarmos até o portão!</p>
<p>Para localizar o "portão" do <a href="https://pt.wikipedia.org/wiki/Museu_de_Arte_de_S%C3%A3o_Paulo">MASP</a>, por exemplo.</p>
<p><img alt="" src="./assets/masp-comparing2b.jpg" /></p>
<p>Os códigos de localização existentes, como o Geohash ou o PlusCode, podem ser melhorados, <strong>adaptados para o Brasil</strong>, fazer uso do que os brasieiros já usam no dia-a-dia. Deveria ser natural, por exemplo,</p>
<ul>
<li>
<p>o uso de abreviações consagradas como os <strong>códigos de estado</strong>: <code>BR-SP</code> ou simplesmente <code>SP</code> designa o Estado de São Paulo, <code>AM</code> Amazonas, etc.</p>
</li>
<li>
<p>a <a href="spec04ap01-siglas/">abreviação de <strong>3 letras do município</strong></a>:  Sampa é <code>SPA</code>, a vizinha Guarulhos <code>GRH</code> e Piracicaba <code>PIR</code>;</p>
</li>
<li>
<p>das regras de  <strong>hierarquia</strong>: primeiro sigla estadual depois municipal. A sigla  PIR só tem significado dentro da sua hierarquia, <code>BR-SP-PIR</code> significa Piracicaba, que é diferente de <code>BR-GO-PIR</code>, de Pires do Rio;</p>
</li>
<li>
<p>do <strong>contexto</strong>. Numa carta internacional acrescentamos prefixo <code>BR</code> ficando <code>BR-SP-SPA</code>, mas se a carta  circula apenas dentro de SP basta <code>PIR</code> ou <code>SPA</code>.</p>
</li>
</ul>
<p>Isso tudo resultaria em um código CLP mais adequado para o brasileiro usar. As siglas você não vê todos os dias, mas já vinhamos usando: em diversos códigos oficiais, tais como <a href="https://pt.wikipedia.org/wiki/Lex_(URN)">identificadores LEX de normas jurídicas</a>, e nas placas de vias públicas ou mapas oficiais. As siglas estão no código das estradas federais (ex. BR-116), estaduais (ex. SP-147) e municipais (ex. PIR-033).</p>
<p>Voltemos ao CLP do MASP, como é hoje e como seriam pequenas adaptações:</p>
<table>
<thead>
<tr>
<th>Opção de CLP proposta</th>
<th>Tecnologia de referência (código padrão) e resolução</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>SP</code></strong></td>
<td><a href="https://en.wikipedia.org/wiki/ISO_3166-2:BR"><strong>Código ISO</strong> 3166</a> do estado (BR-SP)</td>
</tr>
<tr>
<td><strong><code>SP:Y</code></strong></td>
<td><a href="http://geohash.org/6gy"><em>Geohash</em></a> da região (<code>6gy</code>)&nbsp; ~140x140 km</td>
</tr>
<tr>
<td><strong><code>SP-SPA</code></strong></td>
<td><a href="spec04ap01-siglas/"><strong>Código Oficial</strong> do município</a> (<code>BR-SP-SPA</code>)</td>
</tr>
<tr>
<td><strong><code>SP:YCF</code></strong></td>
<td><a href="http://geohash.org/6gycf"><em>Geohash</em></a> da sub-região (<code>6gycf</code>)&nbsp; ~4x5 km</td>
</tr>
<tr>
<td><strong><code>SPA-YCFQ.F0</code></strong></td>
<td><a href="http://geohash.org/6gycfqf0"><em>Geohash</em></a> do <strong>portão</strong> (<code>6gycfqf0</code>)&nbsp; ~25x20&nbsp;m</td>
</tr>
<tr>
<td><strong><code>SPA-YCFQ.F0M</code></strong></td>
<td><a href="http://geohash.org/6gycfqf0m"><em>Geohash</em></a> de um  ponto (<code>6gycfqf0m</code>)&nbsp; ~4x4&nbsp;m</td>
</tr>
<tr>
<td><strong><code>SPA-C8QV+CJ</code></strong></td>
<td><a href="https://plus.codes/588MC8QV+CJ"><em>PlusCode</em></a> do <strong>portão</strong> (<code>588MC8QV+CJ</code>)&nbsp; ~15x15 m</td>
</tr>
<tr>
<td><strong><code>SPA-C8QV+CJ4</code></strong></td>
<td><a href="https://plus.codes/588MC8QV+CJ4"><em>PlusCode</em></a> de um ponto (<code>588MC8QV+CJ4</code>)&nbsp; ~3x3 m</td>
</tr>
<tr>
<td><strong><code>SPA-2PP5.5C</code></strong>&nbsp;*</td>
<td><a href="https://s2.sidewalklabs.com/regioncoverer/?center=-23.561540%2C-46.656141&amp;zoom=20&amp;cells=94ce59c94ac"><em>S2</em></a> do <strong>portão</strong> (<code>94ce59c94ac</code>)&nbsp;<!--94ce--> ~15x15&nbsp;m</td>
</tr>
<tr>
<td><strong><code>SPA-1CSI.IN1</code></strong>&nbsp;*</td>
<td><a href="https://s2.sidewalklabs.com/regioncoverer/?center=-23.561540%2C-46.656141&amp;zoom=20&amp;cells=94ce59c94ae1"><em>S2</em></a> de um ponto (<code>94ce59c94ae1</code>)&nbsp; ~2x2&nbsp;m</td>
</tr>
<tr>
<td>&nbsp;* <small>convertido p. base32.</small></td>
<td></td>
</tr>
</tbody>
</table>
<p>No debate devemos chamar atenção para o fato de que o PlusCode não satisfaz o requisito da hierarquia nas macroregiões: é fundamental saber, antes de decidir qual tecnologia usar, quais critérios consensuais adotaremos.</p>
<p>Entre os padrões que satisfazem todos os requisitos, como o Geohash e o S2, outras  otimizações podem ainda ser realizadas, levando a códigos mais curtos ou mnemônicos.  Ao fixarmos em normas brasileiras uma tabela de subregiões do município, por exemplo, podemos reduzir em um dígito ambos os casos S2 e Geohash. Se além disso, fazermos uso de estimativas da "mancha urbana futura" como fizeram o CEP e o MapCode, o resultado fica ainda melhor, mas a custo de códigos mais longos no meio rural... Tudo isso seria detalhado pelo presente projeto, para que tenhamos <strong>subsídios para uma decisão racional</strong>.</p>
<p>O <!-- <a href="locationCodes.md">levantamento sistemático</a>-->levantamento sistemático, com seleção de otimizações viáveis e a <a href="comparacao/">comparação</a> dos resultados otimizados é também tema central da presente proposta, um resultado importante de ser apresentado.
<!--
As recomendações não se limitam à sintaxe dos códigos e sua tradução em latitude-longitude.  Hoje a maioria das aplicações é sensível a contexto, por exemplo meu celular sabe que estou no Estado de São Paulo, onde <code>PIR</code> significa Piracicaba, sem risco de confusão com Pirai do Sul (<code>PIR</code> no Paraná). São também recomendadas regras de decisão para interpretar prefixos internacionais, tais como <code>BR-SP</code> para a capital, mais curto que <code>BR-SP-SPA</code>.
--></p>
<h1 id="dois-padroes-via-e-coordenada">Dois padrões, via e coordenada</h1>
<p>Afinal CLP, <em>Código Localizador de Portão</em>, faz também papel de "endereço da casa dona do portão".  Falta então definir um outro padrão que é um código que seja uma versão compacta do  endereço postal tradicional. Por exemplo o endereço do MASP,  <em>"Avenida Paulista 1578, São Paulo"</em>. Suponhamos que o código oficial da avenida fosse <code>U131</code>, então o CLP  resultaria em algo como &nbsp; <strong><code>SPA-U131-1578</code></strong>.<!-- "u" de urbano, é o  menor CEP da via, no caso a paulista usa 01310-000, teria o ponto por exempl Quintana do CEP 04965-010 seria 4965.01  --></p>
<p>Esse tipo de código é importante para a representação interna dos endereços de correspondência em bancos de dados abertos, e na comunicação entre bancos de dados (interoperabilidade).  </p>
<p>Existem portanto dois grupos principais de CLPs:</p>
<table border="0"><tr>
<th width="50%">Definição do tipo</th> <th>Aplicações e exemplos</th>
</tr><tr>
<td><b>CLP-via</b>:<br/>Soluções baseadas na <b>proximidade do portão com uma via de acesso</b> a ele. <br/>O CLP-via seria uma escrita simplificada e padronizada do <a href="https://schema.org/PostalAddress" rel="external">endereço postal</a>; o tradicional, baseado em logradouro e numeração predial.
</td><td>Garantiria maior  interoperabilidade entre bases de endereços.
</tr><tr>
<td><b>CLP-coordenada</b>:<br/> Soluções baseadas na <b>coordenada geográfica do portão</b>.<br/> Um algoritmo seguro, do tipo Geohash, PlusCode ou outro, toma como entrada as coordenadas padrão <a href="https://en.wikipedia.org/wiki/Geo_URI_scheme" rel="external">[Geo URI</a>, e devolve um código compacto, que é adotado como CLP.
</td>
<td>Seria um código dado por tecnologias como as exemplificadas, Geohash, S2, PlusCode, etc. Além  do CLP-coordenada ser proposto como substituto do CEP, seria também proposto como uma opção de expressão de geocódigo ou de coordenadas em protocolos similares ao Geo URI.<!-- seria utilizado também localizador em aplicativos, links e outros dispositivos, -->
</td>
</tr></table>

<p>Tecnicamente um tipo pode ser convertido no outro através de <a href="https://en.wikipedia.org/wiki/Geocoding#Geocoding_process">procedimentos de geocodificação</a>. Como existe um crescente <em>mercado de geocofificação</em>, a padronização dos dois tipos de CLP  também ajudaria a regulamentar o setor, garantindo a separação entre pré-processamento do CLP-via e a geocodificação, que resulta num <em>Geo URI</em> com certo grau de confiabilidade. Quando ambos são fornecidos, ambos podem ser convertidos em coordenadas geográficas e comparados, aferindo-se também um grau de confiabilidade resultante da comparação dos dois.  Critérios mínimos para a avaliação de custo e confiabilidade na geocodificação de endereços brasileiros, portanto, passariam a ser viáveis.</p>
<!-- O CLP neste caso seria uma versão complementar do protocolo `geo` da internet, conhecido como [Geo URI](https://en.wikipedia.org/wiki/Geo_URI_scheme), para a expressão de coordenadas. As tecnologias e convenções candidatas a código seriam aquelas discutidos acima na introdução.-->

<h1 id="planejamento">Planejamento</h1>
<p>O trabalho foi apenas esboçado,  um banco de dados preparado, alguns testes foram feitos... Mas ainda há muito que ser realizado. A seguir o planejamento detalhado, incluindo metas e prazos.</p>
<h2 id="objetivo-e-metas-do-trabalho">Objetivo e metas do trabalho</h2>
<p>Objetivo geral: <blockquote>Revisar, debater e publicar os resultados da consulta pública sobre  <strong>especificação técnica e recomendações para um CLP</strong>, bem como disponibilizar protótipos para a realização de testes abertos durante a consulta pública.</blockquote></p>
<p>Objetivos específicos, metas e resultados previstos:</p>
<ol>
<li>
<p>Estabelecer formalmente os <strong>requisitos do CLP</strong>, traduzindo em parâmetros objetivos as decisões tomadas em consenso, primeiramente na comunidade técnica/acadêmica e depois refinando decisões com a comunidade de potenciais usuários.</p>
</li>
<li>
<p>Levantamento, com apoio da comunidade, das <strong>principais soluções e padrões vigentes</strong>. A cada solução avaliar se ela satisfaz os requisitos e se existem casos de uso em prefeituras ou outros países. Em seguida classificar variantes quando existirem alternativas ou parametrizações. <br/>PS: soluções sem  licença aberta ou adaptações em conflito com patentes ou <em>copyright</em> já seriam  eliminadas nesta etapa.</p>
</li>
<li>
<p>Estabelecer formalmente <strong>versões adaptadas</strong> e não-adaptadas às condições do Brasil (ao uso de abreviaturas de nomes de cidade por exemplo).</p>
</li>
<li>
<p>Definição, com apoio da Comunidade, de um <strong>conjunto de testes</strong> (<em>benchmark</em>) ao qual todas as soluções e suas variantes serão submetidas, estabelecendo critérios de rejeição e parâmetros de comparação.</p>
</li>
<li>
<p><strong>Relatório dos resultados</strong> de testes principais, alguns eliminatórios.</p>
</li>
<li>
<p><strong>Oferta pública de protótipos</strong> para a comunidade testar durante um período os padrões e variantes satisfatórios.  </p>
</li>
<li>
<p><strong>Redação</strong> da especificação técnica do CLP, seguida de disponibilização para <strong>consulta pública</strong> e debate, principalmente terceiro setor,  universidades, etc.</p>
</li>
<li>
<p><strong>Texto final da especificação técnica do CLP</strong>, redação, e entrega de pareceres.</p>
</li>
<li>
<p><strong>Apoio a projetos-piloto</strong> com encaminhamento e reutilização da infraestrutura de testes viabilizada.</p>
</li>
<li>
<p><strong>Diálogo com autoridades</strong> e governo em geral: já vem ocorrendo e vai ocorrer em paralelo, ao longo de todo o processo. Mas com resultados seguros e a legitimação da comunidade, o dilágo deixa de ser consultivo e passa a ser mais propositivo. É quando podemos apoiar e somar esforços com as reais autoridades do assunto, tais como SINTER, IBGE, ABNT, etc.</p>
</li>
</ol>
<hr />
<p>&#160;&#160;Conteúdos e dados deste projeto são dedicados ao domínio público. Ver também <a href="assets/README/#Imagens">Créditos das imagens</a>.   <br/>&#160;&#160;<a href="assets/README/"><img alt="" src="./assets/CC0-logo-200px.png" /> </a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script>
        <script src="./assets/leaflet-bing-layer.min.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 0.16.3
Build Date UTC : 2018-09-26 13:06:16
-->
